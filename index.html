<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>GoHamburg Taxi - ZamÃ³wienie</title>
    <style>
        body { font-family: sans-serif; background: #111; color: white; padding: 20px; }
        .form { max-width: 300px; display: flex; flex-direction: column; gap: 10px; }
        input, select, button { padding: 10px; border-radius: 5px; border: none; }
        button { background: #fcd200; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ðŸš• ZamÃ³w Taxi</h2>
    <div class="form">
        <input type="text" id="discord_id" placeholder="Twoje Discord ID (same cyfry)">
        <input type="text" id="loc" placeholder="Lokalizacja (SkÄ…d)">
        <input type="text" id="dest" placeholder="Cel (DokÄ…d)">
        <select id="cat">
            <option value="basic">Basic TAXI</option>
            <option value="green">Green TAXI</option>
            <option value="premium">Premium TAXI</option>
            <option value="classic">Classic TAXI</option>
        </select>
        <button onclick="zamow()">WyÅ›lij zlecenie</button>
    </div>

    <script>
        const sendOrder = async (orderData) => {
            const B_SERVER_URL = 'http://217.154.173.102:12103/api/order'; 

            try {
                const response = await fetch(B_SERVER_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: orderData.discordId,
                        lokalizacja: orderData.loc,
                        cel: orderData.dest,
                        kategoria: orderData.cat
                    })
                });

                const result = await response.json();
                if (result.success) {
                    alert('Sukces! ID kursu: ' + result.courseId);
                } else {
                    alert('BÅ‚Ä…d bota: ' + (result.error || 'Nieznany'));
                }
            } catch (error) {
                console.error('BÅ‚Ä…d poÅ‚Ä…czenia:', error);
                alert('Nie udaÅ‚o siÄ™ poÅ‚Ä…czyÄ‡ z botem. Upewnij siÄ™, Å¼e uÅ¼ywasz http:// a nie https:// w przeglÄ…darce!');
            }
        };

        function zamow() {
            const data = {
                discordId: document.getElementById('discord_id').value,
                loc: document.getElementById('loc').value,
                dest: document.getElementById('dest').value,
                cat: document.getElementById('cat').value
            };

            if(!data.discordId || !data.loc) return alert('WypeÅ‚nij pola!');
            sendOrder(data);
        }
    </script>
</body>
</html>
